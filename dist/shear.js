function createElement(e){var t=document.createElement("DIV");if("string"==typeof e?t.innerHTML=e:t.appendChild(e),"string"==typeof e&&0===t.children.length)throw new TypeError("after_html '"+e+"' is an illegal html string");return{self:t,first:t.children[0]}}function shear(e,t,n){void 0===t&&(t=0),void 0===n&&(n="");var r=window.getSelection();if(t<0)throw new TypeError("line_count "+t+" must > 0");var l=e.innerHTML,i=e.textContent;r.selectAllChildren(e),r.collapseToStart();for(var a=0;a<t;a++)if(r.modify("extend","right","character"),r.modify("extend","right","lineboundary"),!e.contains(r.getRangeAt(0).endContainer)){r.selectAllChildren(e);break}var o=createElement(r.getRangeAt(0).cloneContents()).self,d=o.innerHTML,c=o.textContent;e.innerHTML=d,r.selectAllChildren(e),r.collapseToEnd();var h="",f="",m=createElement("<br/>").first;if(""!==n){var s=createElement(n).first;e.appendChild(m),e.appendChild(s);var g=s.getBoundingClientRect();for(a=0;a<1e3;a++)if(r.modify("extend","left","character"),r.getRangeAt(0).getBoundingClientRect().width>=g.width){r.deleteFromDocument();break}e.removeChild(m),h=e.innerHTML,f=e.textContent}return{full_html:l,full_text:i,cut_html:d,cut_text:c,cut_html_with_after_html:h,cut_text_with_after_html:f}}export default shear;
