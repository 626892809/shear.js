!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.shear=t()}(this,function(){"use strict";function e(e){var t=document.createElement("DIV");if(t.innerHTML=e,!t.firstElementChild)throw new TypeError("after '"+e+"' is an illegal html tag string.");return t.firstElementChild}return function(t,n,i){void 0===n&&(n=0),void 0===i&&(i="");var r=window.getSelection(),l=t.innerHTML,o=t.textContent;r.selectAllChildren(t),r.collapseToStart();for(var d=0;d<n;d++)if(r.modify("extend","right","character"),r.modify("extend","right","lineboundary"),!t.contains(r.getRangeAt(0).endContainer)){r.selectAllChildren(t);break}var a=r.getRangeAt(0).cloneContents(),c=document.createElement("DIV");c.appendChild(a);var f=c.innerHTML,h=a.textContent;t.innerHTML=f,r.selectAllChildren(t),r.collapseToEnd();var u="",m="",s=e("<br/>");if(""!==i){var g=e(i);t.appendChild(s),t.appendChild(g);var C=g.getBoundingClientRect();for(d=0;d<1e3;d++)if(r.modify("extend","left","character"),r.getRangeAt(0).getBoundingClientRect().width>=C.width){r.deleteFromDocument();break}t.removeChild(s),u=t.innerHTML,m=t.textContent}return{full_html:l,full_text:o,cut_html:f,cut_text:h,cut_html_with_after_html:u,cut_text_with_after_html:m}}});
