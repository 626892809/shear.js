!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.shear=t()}(this,function(){"use strict";function e(e){var t=document.createElement("DIV");if("string"==typeof e?t.innerHTML=e:t.appendChild(e),"string"==typeof e&&0===t.children.length)throw new TypeError("after_html '"+e+"' is an illegal html string");return{self:t,first:t.children[0]}}return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r="");var i=window.getSelection();if(n<0)throw new TypeError("line_count "+n+" must > 0");var l=t.innerHTML,o=t.textContent;i.selectAllChildren(t),i.collapseToStart();for(var d=0;d<n;d++)if(i.modify("extend","right","character"),i.modify("extend","right","lineboundary"),!t.contains(i.getRangeAt(0).endContainer)){i.selectAllChildren(t);break}var f=e(i.getRangeAt(0).cloneContents()).self,a=f.innerHTML,c=f.textContent;t.innerHTML=a,i.selectAllChildren(t),i.collapseToEnd();var h="",u="",s=e("<br/>").first;if(""!==r){var m=e(r).first;t.appendChild(s),t.appendChild(m);var g=m.getBoundingClientRect();for(d=0;d<1e3;d++)if(i.modify("extend","left","character"),i.getRangeAt(0).getBoundingClientRect().width>=g.width){i.deleteFromDocument();break}t.removeChild(s),h=t.innerHTML,u=t.textContent}return{full_html:l,full_text:o,cut_html:a,cut_text:c,cut_html_with_after_html:h,cut_text_with_after_html:u}}});
